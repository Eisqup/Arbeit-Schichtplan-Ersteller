Check again a emp swap over some shifts

move error reports to a another function